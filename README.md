# Speck-It MCP Server

The Speck-It MCP Server adapts GitHub's Spec Kit workflow into a Model Context Protocol (MCP) service. It enables coding agents to generate specifications, implementation plans, task checklists, and execution playbooks directly within a project workspace. All generated artifacts are stored beneath the project's `.speck-it/` (or `.spec-kit/`) directory.

## Features

- **Spec generation** via `generate_spec` with constitution-aware summaries and clarifications.
- **Implementation planning** through `generate_plan`, producing phase-oriented guidance.
- **Execution tasks** with `generate_tasks`, `list_tasks`, `update_task`, `next_task`, and `complete_task` to track progress.
- **Governance hooks** including `set_constitution`, `get_constitution`, `feature_status`, and `finalize_feature`.
- **Root registration** utilities (`set_feature_root`) to ensure artifacts resolve to the correct project.

## Quick Start

1. **Install dependencies**

   ```bash
   uv sync
   ```

2. **Run the MCP server**

   ```bash
   uv run python main.py
   ```

   The server communicates over stdio by default. Configure your MCP-compatible agent (e.g., Windsurf, Roo Code, Cline) to launch this command.

3. **Connect an agent**
   - Point the agent at the command above.
   - Supply `root` arguments or call `set_feature_root` if the agent executes outside the project tree.

## Example MCP Client Configuration

Below is a sample MCP configuration snippet that launches this server via `uv`:

```json
{
  "mcpServers": {
    "speck-it": {
      "command": "uv",
      "args": [
        "run",
        "--with",
        "mcp[cli]",
        "mcp",
        "run",
        "<path-to-repo>/main.py"
      ],
      "disabledTools": []
    }
  }
}
```

## Tooling Overview

- **Workspace setup**: `set_constitution`, `get_constitution`, `list_features`.
- **Specification pipeline**: `generate_spec`, `generate_plan`, `generate_tasks`.
- **Task execution**: `list_tasks`, `update_task`, `next_task`, `complete_task`, `feature_status`, `finalize_feature`.
- **Project binding**: `set_feature_root` to register the correct artifact root when auto-detection is insufficient.

## Storage Layout

Artifacts are written under `.speck-it/` by default:

```
.speck-it/
├── memory/
│   └── constitution.md
├── specs/
│   └── <feature-id>/
│       ├── spec.md
│       ├── plan.md
│       ├── tasks.md
│       └── analysis.json
└── state/
    └── <feature-id>_status.json
```

Set the `SPECKIT_STORAGE_DIR` environment variable to switch to an alternate directory name (e.g., `.spec-kit`).

## Development

- Create a virtual environment or rely on `uv`'s managed environment (`uv venv`).
- Run formatting and tests before committing:
  ```bash
  uv run pytest
  ```
- Regenerate specs or plans when changing NLP heuristics in `lib/speckit.py` to keep templates up to date.

## Example Output: Next.js + TypeScript + shadcn/ui Portfolio

This repository includes a fully generated developer portfolio that showcases how the MCP server guides an agent from constitution setup through task completion. It was generated by running the MCP server against the shadcn/ui init project with "Grok Code Fast 1" in Windsurf. The screenshots reside in `screenshots/example-outputs/nextjs-dev-portfolio/`.

### Workflow Steps

- **Step 1 — Constitution**: `set_constitution` was used to enforce TypeScript, shadcn/ui, reusable patterns, strong typing, and Zustand for state needs.
- **Step 2 — Root Registration**: `set_feature_root` recorded the project directory so all artifacts write to the correct `.speck-it/` tree.
- **Step 3 — Specification**: `generate_spec` captured the high-level goals for a SaaS-inspired portfolio with dark mode, animations, and rich sections filled with placeholders.
- **Step 4 — Planning**: `generate_plan` produced a detailed implementation roadmap aligning engineering tasks with the constitution.
- **Step 5 — Task Authoring**: `generate_tasks` converted the plan into a TDD-friendly checklist stored in `tasks.md`.
- **Step 6 — Execution**: Each checklist item was implemented and closed via `update_task`, producing the full Next.js + TypeScript + shadcn/ui experience.

### Screenshots

| Home                                                                 |
| -------------------------------------------------------------------- |
| ![Home](./screenshots/example-outputs/nextjs-dev-portfolio/Home.png) |

| Contact                                                                    | About                                                                  | Skills                                                                   |
| -------------------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| ![Contact](./screenshots/example-outputs/nextjs-dev-portfolio/Contact.png) | ![About](./screenshots/example-outputs/nextjs-dev-portfolio/About.png) | ![Skills](./screenshots/example-outputs/nextjs-dev-portfolio/Skills.png) |

| Projects                                                                     | Experience                                                                       | Education                                                                      |
| ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| ![Projects](./screenshots/example-outputs/nextjs-dev-portfolio/Projects.png) | ![Experience](./screenshots/example-outputs/nextjs-dev-portfolio/Experience.png) | ![Education](./screenshots/example-outputs/nextjs-dev-portfolio/Education.png) |

Additional sections (projects, experience, education, and contact) follow the same visual system and can be regenerated by re-running the workflow steps above.

## License

- Project code is provided under the **BSD 3-Clause License** (see `LICENSE`).
- Portions derived from GitHub's Spec Kit remain subject to the **MIT License**; the full text is reproduced in `LICENSE`.
